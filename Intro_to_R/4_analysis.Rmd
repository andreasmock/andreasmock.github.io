---
title: "Teil 4: Datenanalyse"
author:
- name: Andreas Mock
  affiliation: Nationales Centrum für Tumorerkrankungen (NCT) Heidelberg
  email: andreas.mock@med.uni-heidelberg.de
output:
  rmarkdown::html_document:
    theme: cosmo
    toc: false
    toc_float: false
---

```{r, echo=FALSE, message=FALSE}
library(gdata)
library(survival)
library(survminer)
padc = read.xls(xls ="http://www.cell.com/cms/attachment/2106066377/2081438868/mmc2.xlsx",
                skip=1)
```

## Einführung

Neben den exzellenten Möglichkeiten zur Datenvisualiserung bietet *R* alle Tools für die moderne Datenanalyse.

## Pakete installieren und laden

```{r,eval=FALSE}
install.packages("gdata")

library(gdata)
```

## Beispieldaten

**Integrated Genomic Characterization of Pancreatic Ductal Adenocarcinoma**  
*Cancer Cell*. **Volume 32** Issue 2: p185-203

```{r, eval=FALSE}
padc = read.xls(xls ="http://www.cell.com/cms/attachment/2106066377/2081438868/mmc2.xlsx",
                skip=1)
```

## Basics

In dieser Sektion habe ich bewusst auf Erklärung verzichtet. Versucht bitte einfach nachzuvollziehen, was die Funktionen bzw. die Syntax bedeutet. 

```{r}
padc$Days.to.death
```


```{r}
mean(padc$Days.to.death, na.rm=TRUE)
median(padc$Days.to.death, na.rm=TRUE)
summary(padc$Days.to.death, na.rm=TRUE)
```

Was passiert ohne `na.rm=TRUE`?

```{r}
table(padc$Gender)
```

```{r}
padc$Initial.Slide.Tumor.Cellularity>40
sum(padc$Initial.Slide.Tumor.Cellularity>40, na.rm=TRUE)
```

```{r}
which(padc$Initial.Slide.Tumor.Cellularity>40)
```

```{r}
r0 = padc[padc$Residual.tumor=="r0",]
```

## Hypothesentest

### T-Test

Der T-Test ist ein parametrischer (geht von normalverteilten Daten aus) Hypothesentest zum Vergleich von kontinuierlichen Daten zweier Gruppen.

```{r}
t.test(padc$Days.to.death ~ padc$Gender)
```

### ANOVA (analysis of variance)

ANOVA bietet die Möglichkeit mehr als 2 Gruppen miteinander zu vergleichen:

```{r}
summary(aov(padc$Days.to.death ~ padc$Grade))
```

## Übung (20 min.)

Nutzt T-Test und ANOVA, um signifikante Assozationen zwischen den TCGA Metadaten des `padc` Objektes zu finden.