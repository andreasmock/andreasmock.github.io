---
title: "Angewandte Datenanalyse mit `R`"
subtitle: "Tag 1 - Einführung in Programmierung mit `R` "
output:
  html_document:
    toc: true
    toc_float: true
---

Im ersten Teil des Praktikums, soll es uns darum gehen so schnell wie möglich in das Kerngeschäft von R einzusteigen - die Datenexploration.

<br>

### Cheat-Sheet - Programmieren mit `R`

**Objektypen**

![](pics/R_objects.png){width=600px}

**Subsetting von Objekten**

```{r,eval=FALSE}
# ersten beiden Einträge des Vektors
vector[1:2]

# ersten drei Spalten der Matrix
matrix[,1:3]

# 'age' Spalte des Dataframes 
dataframe$age
```

**R Packete**

Installation

```{r,eval=FALSE}
install.packages("tidyverse")
```

Ins Environment laden

```{r,eval=TRUE}
library(tidyverse)
```

**Funktionen zur Exploration von Dataframes**

Die Grundsyntax einer jeden Funktion ist

```{r, eval=FALSE}
function(Objekt, Argumente)
```

Die Argumente sind hierbei fakultativ.

```{r, eval=FALSE}
#Die ersten 6 Zeilen des Dataframes anzeigen
head(dataframe)

# Tabelle von kategoriellen Daten
table(dataframe$column1)

# Tabelle von fehlenden Informationen
table(is.na(dataframe$column1))

# Summary von kontinuierlichen Daten
summary(dataframe$column1)
```

### Beispieldaten

Der Bespieldatensatz des Kurses sind Metadaten des *The Cancer Genome Atlas (TCGA)* zur Analyse von Kopf-Hals-Tumoren (head and neck squamous cell carcinoma; HNSCC). Der Datensatz fasst die wichtigsten klinisch-pathologischen Charakteristika der Studienkohorte (n=279) zusammen.

Für den Start möchten wir bewusst den Schritt überspringen, wie genau Daten in R geladen werden können und laden das Objekt mit folgendem Befehl:

```{r}
load(url("http://andreasmock.github.io/data/hnscc.RData"))
```


```{r}
head(hnscc)
```

### Übung 1

Nutzt die oben aufgeführten Funktionen um die Metadaten des Objekts `hnscc` zu explorieren:

- Wie viele Patienten trinken regelmäßig Alkohol?
- Was ist die häufigste Lokalisation der Tumoren?
- Bei wie vielen Patienten ist das Grading unbekannt?
- Was ist die maximale Anzahl von Packyears, die angegeben wurde?
- Wie viele Angaben fehlen in der Spalte "pack_years"?
- In welchem Bereich bewegte sich das Überleben der Patienten?

### Appetizer - Visualisierung mit R

Visualisierungen mit dem ggplot2 Paket (Teil des tidyverse Pakets) sind neuer Standard in R.

Prinzip: Malen eines Gemähldes - Schicht für Schicht.

Metadaten des Bespieldatensatzes, die wir visualisieren können:

```{r}
colnames(hnscc)
```

Leere Leinwand. age auf der x-Achse und days_to_death auf der y-Achse.

```{r, fig.width=4.5, fig.height=3.5}
ggplot(hnscc, aes(x=age, y=days_to_death))
```

Dotplot

```{r, fig.width=4.5, fig.height=3.5}
ggplot(hnscc, aes(x=age, y=days_to_death)) + 
    geom_point()
```

### Übung 2 

In der zweiten Übungen des heutigen Tages gilt es spielerisch die folgenden Funktionen auszuführen. Bitte versucht ohne dass ihr die individuellen Funktionen kennt zu verstehen was passiert. Die Systematik des Plottens wird Hauptgegenstand des 2. Praktikumstages sein.

```{r, fig.width=4.5, fig.height=3.5}
ggplot(hnscc, aes(x=age, y=days_to_death, color=neoplasm_site)) + 
    geom_point()
```

```{r, fig.width=4.5, fig.height=3.5}
ggplot(hnscc, aes(x=age, y=days_to_death, size=pack_years)) + 
    geom_point()
```

Warum fehlen im Vergleich zum vorherigen Plot Datenpunkte?

```{r,fig.width=3, fig.height=3.5}
ggplot(hnscc, aes(x=gender, y=pack_years)) + 
    geom_point() 
```

Warum ist dieser Plot wenig sinnvoll? Warum eignet sich der folgende Boxplot besser um die Verteilung der Daten zu verstehen?

```{r,fig.width=3, fig.height=3.5}
ggplot(hnscc, aes(x=gender, y=pack_years)) + 
    geom_boxplot() 
```

```{r,fig.width=4.5, fig.height=3.5}
ggplot(hnscc, aes(x=pack_years)) + 
    geom_density() 
```

```{r,fig.width=5.5, fig.height=3.5}
ggplot(hnscc, aes(x=age, y=days_to_death, color=neoplasm_site)) + 
    geom_point() +
    facet_wrap(~alcohol)
```

### Schon fertig?

Wer für heute mit den Übungen fertig ist darf die Zeit gerne nutzen, sich schon einmal die ganze Bandbreite der Visualierungen in R anzuschauen.

Guter Startpunkt: Das R Cookbook von Winston Chang ([Link](http://www.cookbook-r.com/Graphs/))